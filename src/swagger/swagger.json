{
  "swagger": "2.0",
  "info": {
    "version": "1.0.0",
    "title": "Real Estate Listing API",
    "description": "API for managing properties, agents, users, and inquiries. Secured with GitHub OAuth."
  },
  "host": "cse341-team2-real-estate-api-final.onrender.com",
  "basePath": "/",
  "schemes": ["https", "http"],
  "consumes": ["application/json"],
  "produces": ["application/json"],
  "securityDefinitions": {
    "github_auth": {
      "type": "oauth2",
      "authorizationUrl": "https://github.com/login/oauth/authorize",
      "flow": "implicit",
      "description": "Login with GitHub to access protected routes"
    }
  },
  "paths": {
    "/properties": {
      "get": {
        "tags": ["Properties"],
        "responses": { "200": { "description": "List of all properties" } }
      },
      "post": {
        "tags": ["Properties"],
        "security": [{ "github_auth": [] }],
        "parameters": [{ "name": "body", "in": "body", "schema": { "$ref": "#/definitions/Property" } }],
        "responses": { "201": { "description": "Property created" }, "401": { "description": "Unauthorized" } }
      }
    },
    "/properties/{id}": {
      "get": { "tags": ["Properties"], "parameters": [{ "name": "id", "in": "path", "required": true, "type": "string" }], "responses": { "200": { "description": "Property details" } } },
      "put": { 
        "tags": ["Properties"], 
        "security": [{ "github_auth": [] }],
        "parameters": [{ "name": "id", "in": "path", "required": true, "type": "string" }, { "name": "body", "in": "body", "schema": { "$ref": "#/definitions/Property" } }], 
        "responses": { "200": { "description": "Property updated" } } 
      },
      "delete": { 
        "tags": ["Properties"], 
        "security": [{ "github_auth": [] }],
        "parameters": [{ "name": "id", "in": "path", "required": true, "type": "string" }], 
        "responses": { "200": { "description": "Property deleted" } } 
      }
    },
    "/users": {
      "get": { "tags": ["Users"], "responses": { "200": { "description": "List of all users" } } },
      "post": { 
        "tags": ["Users"], 
        "security": [{ "github_auth": [] }], 
        "parameters": [{ "name": "body", "in": "body", "schema": { "$ref": "#/definitions/User" } }], 
        "responses": { "201": { "description": "User created" } } 
      }
    },
    "/users/{id}": {
      "get": { "tags": ["Users"], "parameters": [{ "name": "id", "in": "path", "required": true, "type": "string" }], "responses": { "200": { "description": "User details" } } },
      "put": { "tags": ["Users"], "security": [{ "github_auth": [] }], "parameters": [{ "name": "id", "in": "path", "required": true, "type": "string" }, { "name": "body", "in": "body", "schema": { "$ref": "#/definitions/User" } }], "responses": { "200": { "description": "User updated" } } },
      "delete": { "tags": ["Users"], "security": [{ "github_auth": [] }], "parameters": [{ "name": "id", "in": "path", "required": true, "type": "string" }], "responses": { "200": { "description": "User deleted" } } }
    },
    "/agents": {
      "get": { "tags": ["Agents"], "responses": { "200": { "description": "List of agents" } } },
      "post": { 
        "tags": ["Agents"], 
        "security": [{ "github_auth": [] }], 
        "parameters": [{ "name": "body", "in": "body", "schema": { "$ref": "#/definitions/Agent" } }], 
        "responses": { "201": { "description": "Agent created" } } 
      }
    },
    "/agents/{id}": {
      "get": { "tags": ["Agents"], "parameters": [{ "name": "id", "in": "path", "required": true, "type": "string" }], "responses": { "200": { "description": "Agent details" } } },
      "put": { 
        "tags": ["Agents"], 
        "security": [{ "github_auth": [] }], 
        "parameters": [{ "name": "id", "in": "path", "required": true, "type": "string" }, { "name": "body", "in": "body", "schema": { "$ref": "#/definitions/Agent" } }], 
        "responses": { "200": { "description": "Agent updated" } } 
      },
      "delete": { 
        "tags": ["Agents"], 
        "security": [{ "github_auth": [] }], 
        "parameters": [{ "name": "id", "in": "path", "required": true, "type": "string" }], 
        "responses": { "200": { "description": "Agent deleted" } } 
      }
    },
    "/inquiries": {
      "get": { "tags": ["Inquiries"], "responses": { "200": { "description": "List of inquiries" } } },
      "post": { 
        "tags": ["Inquiries"], 
        "parameters": [{ "name": "body", "in": "body", "schema": { "$ref": "#/definitions/Inquiry" } }], 
        "responses": { "201": { "description": "Inquiry created" } } 
      }
    },
    "/inquiries/{id}": {
      "get": { "tags": ["Inquiries"], "parameters": [{ "name": "id", "in": "path", "required": true, "type": "string" }], "responses": { "200": { "description": "Inquiry details" } } },
      "put": { 
        "tags": ["Inquiries"], 
        "security": [{ "github_auth": [] }], 
        "parameters": [{ "name": "id", "in": "path", "required": true, "type": "string" }, { "name": "body", "in": "body", "schema": { "$ref": "#/definitions/Inquiry" } }], 
        "responses": { "200": { "description": "Inquiry updated" } } 
      },
      "delete": { 
        "tags": ["Inquiries"], 
        "security": [{ "github_auth": [] }], 
        "parameters": [{ "name": "id", "in": "path", "required": true, "type": "string" }], 
        "responses": { "200": { "description": "Inquiry deleted" } } 
      }
    }
  },
  "definitions": {
    "Property": {
      "type": "object",
      "required": ["title", "price", "location", "agentId"],
      "properties": {
        "title": { "type": "string" },
        "description": { "type": "string" },
        "price": { "type": "number" },
        "location": { "type": "string" },
        "agentId": { "type": "string" }
      }
    },
    "User": {
      "type": "object",
      "required": ["name", "email"],
      "properties": {
        "name": { "type": "string" },
        "email": { "type": "string" },
        "phone": { "type": "string" }
      }
    },
    "Agent": {
      "type": "object",
      "required": ["name", "licenseNumber"],
      "properties": {
        "name": { "type": "string" },
        "licenseNumber": { "type": "string" },
        "email": { "type": "string" }
      }
    },
    "Inquiry": {
      "type": "object",
      "required": ["propertyId", "userId", "message"],
      "properties": {
        "propertyId": { "type": "string" },
        "userId": { "type": "string" },
        "message": { "type": "string" }
      }
    }
  }
}